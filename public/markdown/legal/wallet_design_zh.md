#  钱包合约规则

本文档描述了路印钱包智能合约在钱包主人，守护人、锁、限额和安全方面的规则。您的路印钱包不是一个普通的EOA地址， 而是一个智能合约地址。因此，它更灵活，并且具有内在的规则和逻辑。这使得它不仅仅用户友好，还安全且可扩展。你会看到它包含的所有规则都十分严谨，安全性是路印钱包设计决策的核心。

## 定义

- **守护人**是您选定的可以提供签名的以太坊地址。它可以是您其它以太坊钱包（包括EOA和硬件），也可以是您亲人和朋友的路印钱包。过半数守护人的共识拥有比钱包主人更大的话语权，并可集体决策钱包的最终归属。
- **守护人过半数审批**指如果钱包拥有N个守护人，交易需要至少N/2+1个守护人核准。
- **守护人加钱包主人过半数审批**指钱包如果拥有N个守护人，交易需要至少(N+1)/2+1个守护人核准。在一些情况下，钱包主人必须核准交易。


## 规则

### 创建
- 钱包创建时同时ENS域名会永久绑定到钱包钱包地址。钱包地址和ENS不可更改。
- 钱包创建时自动添加路印官方守护人。官方守护人可以被用户删除和再次添加。

### 基础
- 路印钱包默认使用元交易（Meta Transaction）发送交易，并支持多个币种扣费。
- 路印钱包通过合约模块进行功能扩展（包括升级）。合约模块需路印认证注册，并在用户签名授权后才可以被添加到用户钱包使用。
- 路印钱包支持验签，遵循ERC1271规范。钱包锁定后验签会失败。

### 安全
- 添加前2个守护人即刻生效；添加更多守护人操作和删除守护人操作72小时后生效。
- 支持**守护人加钱包主人过半数审批**添加和删除守护人。该操作即刻生效。
- 钱包主人和任意一个守护人都可以锁定钱包，该操作即刻生效。钱包锁定后不会自动解锁。
- 支持**守护人过半数审批**解锁钱包，该操作即刻生效。
- 支持**守护人过半数审批**恢复钱包（即“社交恢复”），该操作即刻生效。钱包成功恢复后等待生效的添加和删除守护人操作将自动失效。

### 转账
- 支持转账日限额，默认日限额为无限大。增加日限额操作24小时后生效，降低日限额操作即刻生效。
- 支持白名单地址列表。转账给白名单地址或与其交互不受日限额限制。添加白名单地址24小时后生效；删除白名单地址即刻生效。
- 支持**守护人加钱包主人过半数审批**增加和删除白名单地址。该操作即刻生效。
- 支持全局DApp白名单地址列表，转账给DApp白名单地址或与其交互不受日限额限制。全局DApp白名单列表由路印管理。
